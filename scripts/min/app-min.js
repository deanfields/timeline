var slideout=new Slideout({panel:document.getElementById("main-content"),menu:document.getElementById("menu"),padding:256,tolerance:70,side:"right"});document.querySelector(".mast__slideout-button").addEventListener("click",function(){slideout.toggle()}),slideout.on("beforeopen",function(){document.querySelector(".mast").className+=" mast--menu-open"}),slideout.on("beforeclose",function(){document.querySelector(".mast").className="mast"}),document.querySelector(".slideout-menu").addEventListener("click",function(e){"A"===e.target.nodeName&&slideout.close()}),$(function(){"use strict";var e=document.querySelectorAll(".timeline__slide"),t=document.getElementById("date_stat"),n=document.getElementById("launch_stat"),o=document.getElementById("users_stat"),i=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),l=new ScrollMagic.Controller({globalSceneOptions:{duration:$(".slide").height(),triggerHook:.025,reverse:!0}});enquire.register("screen and (min-width:699px)",{match:function(){i=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),l=new ScrollMagic.Controller({globalSceneOptions:{duration:$(".slide").height(),triggerHook:.025,reverse:!0}}),l.scrollTo(function(e){TweenMax.to(window,.5,{scrollTo:{y:e,autoKill:!1},ease:Cubic.easeInOut})}),$(document).on("click","#nextSlide",function(e){e.preventDefault();var t=$(".timeline-navigation .active"),n=$current.index()+1;l.scrollTo("#slide-"+n)}),$(document).on("click","#prevSlide",function(e){e.preventDefault();var t=$(".timeline-navigation .active"),n=t.index()-1;console.log("next one needs to go to "+n),l.scrollTo("#slide-"+n)}),$(document).on("click","a[href^=#]",function(e){var t=$(this).attr("href");$(t).length>0&&(e.preventDefault(),l.scrollTo(t),window.history&&window.history.pushState&&history.pushState("",document.title,t))});for(var r=0;r<e.length;r++){var a=new ScrollMagic.Scene({triggerElement:"#slide-"+r}).setClassToggle("#anchor-"+r,"active").addTo(l),c=new TimelineMax;c.add(TweenMax.to(t,.1,{text:e[r].getAttribute("data-date")}),"0"),c.add(TweenMax.to(n,.2,{text:e[r].getAttribute("data-launched")}),"0"),c.add(TweenMax.to(o,.2,{text:e[r].getAttribute("data-users")}),"0");var d=window.innerHeight-window.innerHeight/2-155+"px";new ScrollMagic.Scene({triggerElement:e[r],triggerHook:"onEnter",offset:"-"+d}).addTo(i).setTween(c),new ScrollMagic.Scene({triggerElement:e[r]}).setPin(e[r]).addIndicators().addTo(i)}},unmatch:function(){i.destroy(!0),$(document).on("click","a[href^=#]",function(e){var t=$(this),n=t.attr("href"),o=$(n).position().top;return o>$(window).height()&&(o+=94),TweenMax.to(window,1,{scrollTo:{y:o,autoKill:!1},ease:Power3.easeOut}),!1})}})}),$("body").keydown(function(e){8==e.keyCode,38==e.keyCode&&e.preventDefault(),40==e.keyCode&&e.preventDefault(),32==e.keyCode&&(console.log("keyboard pressed"),e.preventDefault())});